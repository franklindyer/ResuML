<!DOCTYPE html>

<head>
    <meta charset="utf-8">
</head>

<body>
    {% set identity = resume.find('identity') -%}
    <h1>{{ identity.find('name').text }}'s resum√©</h1>

    {% set contact = resume.find('contact') -%}
    {% set email = contact.find('email') -%}
    <p>You can contact me through my {{ email.get('type') }} email: {{ email.text }}</p>

    <hr>
    {% set skills = resume.find('skills') -%}
    <h2>Skills</h2>
    <ul>
        {% for skill in prioritize(skills, 'skills') -%}
        <li> The {{ {"proglang": "programming language",
                    "tech": "technology",
                    "language": "spoken language of",
                    "softskill": "soft skill of"}[skill.tag] 
             }} {{ skill.text.strip() }} 
             {%- if skill.find('certification') is not none -%}
             &nbsp;({{ skill.find('certification').text }})
             {%- endif %} </li>
        {% endfor %}
    </ul>

    <hr>
    {% set history = resume.find('history') -%}
    <h2>Experience</h2>
    {% for position in history -%}
    <h3>{{ position.get('title') }}</h3>
    <i>{{ position.get('org') }}, {{ daterange(position.find('from'), position.find('to')) }}</i>
    <ul>
        {% for role in position.findall('role') -%}
        <li>{{ role.text }}</li>
        {% endfor %}
    </ul>
    {% endfor %}
<body>
